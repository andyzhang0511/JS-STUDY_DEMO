<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        // async声明的函数的返回本质上是一个Promise
        // 只要声明了这个函数是async，那么内部不管你怎么处理，它的返回肯定是个Promise
        // async function process() {

        // }
        const a = (async function () {
            return '我是Promise'
        })()
        // console.log(a)
        // 返回是Promise
        // Promise {<resolved>: "我是Promise"}

        // 等同于:
        const b = (async function () {
            return Promise.resolve('我是Promise')
        })()
        // console.log(b)

        const demo = (async function () {
            return Promise.resolve('我是Promise')
            // 等同于 
            //return '我是Promise'
            // 等同于
            // return new Promise((resolve, reject) => {
            //     resolve('我是Promise')
            // })
        })()
        demo.then(result => {
            // console.log(result) //这里拿到返回值
        })

        // await的本质是可以提供等同于'同步效果'的等待异步返回能力的语法糖
        // 用await声明的Promise异步返回，必须“等待”到有返回值的时候，代码才继续执行下去
        // 请记住await是在等待一个Promise的异步返回
        const demo1 = (async () => {
            let result = await new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve('我延迟了一秒')
                }, 1000)
            })
            console.log('我由于上面的程序还没执行完，先不执行，等待一会')
            return result
        })()
        // demo1的返回当做Promise
        demo1.then(result => {
            console.log('输出', result) // 输出 我延迟了一秒
        })
        // demo1()
    </script>
</head>

<body>

</body>

</html>